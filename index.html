<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For You ‚ù§Ô∏è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe5f1 100%);
            min-height: 100vh;
            color: #5a3a4a;
        }

        nav {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .nav-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #d63384;
        }

        .nav-links {
            display: none;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-links.show {
            display: flex;
        }

        .nav-btn {
            padding: 0.5rem 1.2rem;
            background: linear-gradient(135deg, #ff6b9d 0%, #d63384 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(214, 51, 132, 0.4);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #d63384 0%, #a02560 100%);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Game Section */
        .game-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }

        .game-section h2 {
            color: #d63384;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .game-section p {
            margin-bottom: 1.5rem;
            color: #6b4a5a;
        }

        .wins-tracker {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .win-heart {
            font-size: 2rem;
            opacity: 0.3;
            transition: all 0.3s;
        }

        .win-heart.active {
            opacity: 1;
            animation: heartBeat 0.5s;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .game-board {
            display: inline-block;
            margin: 2rem auto;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        #gameCanvas {
            border: none;
            cursor: pointer;
            display: block;
        }

        .game-status {
            margin-top: 1.5rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: #d63384;
            min-height: 30px;
        }

        .game-controls {
            margin-top: 1rem;
        }

        .btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff6b9d 0%, #d63384 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(214, 51, 132, 0.4);
        }

        /* Pages Styles */
        .image-message-grid {
            display: grid;
            gap: 2rem;
        }

        .image-message-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .image-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        .image-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        .message-container {
            padding: 1.5rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .message-container::-webkit-scrollbar {
            width: 8px;
        }

        .message-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .message-container::-webkit-scrollbar-thumb {
            background: #d63384;
            border-radius: 10px;
        }

        .message-text {
            line-height: 1.6;
            color: #5a3a4a;
        }

        .games-grid {
            display: grid;
            gap: 2rem;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .game-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }

        .game-card h3 {
            color: #d63384;
            margin-bottom: 1rem;
        }

        .puzzle-container {
            display: grid;
            gap: 2px;
            max-width: 400px;
            margin: 1rem auto;
            background: #ddd;
            padding: 2px;
            border-radius: 10px;
        }

        .puzzle-piece {
            aspect-ratio: 1;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 5px;
            background-size: 300% 300%;
        }

        .puzzle-piece:hover {
            opacity: 0.8;
            transform: scale(0.95);
        }

        .puzzle-piece.selected {
            border: 3px solid #d63384;
        }

        .reaction-game {
            position: relative;
            height: 150px;
            background: linear-gradient(135deg, #ffe5f1 0%, #ffeef8 100%);
            border-radius: 15px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .heart-slider {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3rem;
            transition: left 0.05s linear;
        }

        .target-zone {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(214, 51, 132, 0.2);
            border-left: 2px dashed #d63384;
            border-right: 2px dashed #d63384;
        }

        .notepad-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
        }

        .notepad-header {
            text-align: center;
            color: #d63384;
            margin-bottom: 1.5rem;
        }

        .notepad-textarea {
            width: 100%;
            min-height: 400px;
            padding: 1.5rem;
            border: 2px solid #ffe5f1;
            border-radius: 15px;
            font-size: 1rem;
            line-height: 1.8;
            resize: vertical;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fffbfd 0%, #ffeef8 100%);
        }

        .notepad-textarea:focus {
            outline: none;
            border-color: #d63384;
        }

        .notepad-controls {
            margin-top: 1.5rem;
            text-align: center;
        }

        .timeline {
            max-width: 600px;
            margin: 0 auto;
        }

        .timeline-item {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
        }

        .timeline-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 25px rgba(0,0,0,0.15);
        }

        .timeline-date {
            color: #d63384;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .timeline-image {
            width: 100%;
            border-radius: 15px;
            margin-bottom: 1rem;
        }

        .timeline-caption {
            color: #5a3a4a;
            line-height: 1.6;
        }

        .timeline-note {
            margin-top: 1rem;
            padding: 1rem;
            background: #ffeef8;
            border-radius: 10px;
            font-style: italic;
        }

        .add-note-btn {
            margin-top: 0.5rem;
            padding: 0.5rem 1rem;
            background: #ff6b9d;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .fullscreen-viewer {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .fullscreen-viewer.active {
            display: flex;
        }

        .fullscreen-image {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }

        .close-viewer {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            background: rgba(214, 51, 132, 0.8);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            margin: 0 1rem;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-content h2 {
            color: #d63384;
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .nav-content {
                justify-content: center;
            }

            .nav-title {
                font-size: 1.2rem;
            }

            .game-section {
                padding: 1rem;
            }

            .game-section h2 {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-content">
            <div class="nav-title">üíï For You</div>
            <div class="nav-links" id="navLinks">
                <button class="nav-btn" onclick="showPage('page1')">Images & Messages</button>
                <button class="nav-btn" onclick="showPage('page2')">Lovely Games</button>
                <button class="nav-btn" onclick="showPage('page3')">Your Notepad</button>
                <button class="nav-btn" onclick="showPage('page4')">Memory Lane</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="game-section" id="gameSection">
            <h2>üéÆ Unlock the Pages</h2>
            <p>Win 3 games consecutively to unlock all pages!</p>
            
            <div class="wins-tracker">
                <span class="win-heart" id="heart1">‚ù§Ô∏è</span>
                <span class="win-heart" id="heart2">‚ù§Ô∏è</span>
                <span class="win-heart" id="heart3">‚ù§Ô∏è</span>
            </div>

            <div class="game-board">
                <canvas id="gameCanvas" width="400" height="400"></canvas>
            </div>

            <div class="game-status" id="gameStatus">Your turn!</div>
            <div class="game-controls">
                <button class="btn btn-primary" onclick="resetGame()">New Game</button>
            </div>
        </div>

        <div class="page" id="page1">
            <div class="image-message-grid">
                <div class="image-message-card">
                    <div class="image-container">
                        <img src="https://via.placeholder.com/400x711/ffb6d9/ffffff?text=Memory+1" alt="Memory 1">
                    </div>
                    <div class="message-container">
                        <p class="message-text">
                            Every moment with you feels like a dream come true. Your smile lights up my world in ways I never knew possible. I cherish every laugh we share, every conversation that goes deep into the night, and every quiet moment when we're just together. You make everything better, and I'm so grateful to have you in my life. ‚ù§Ô∏è
                        </p>
                    </div>
                </div>

                <div class="image-message-card">
                    <div class="image-container">
                        <img src="https://via.placeholder.com/400x711/ffd6e8/ffffff?text=Memory+2" alt="Memory 2">
                    </div>
                    <div class="message-container">
                        <p class="message-text">
                            I love how you understand me without words, how you know when I need a hug or when I need space. Your kindness and warmth make every day special. The way you care about the little things shows me how beautiful your heart is. Thank you for being you, and for choosing to share your life with me. üíï
                        </p>
                    </div>
                </div>

                <div class="image-message-card">
                    <div class="image-container">
                        <img src="https://via.placeholder.com/400x711/ffe5f1/ffffff?text=Memory+3" alt="Memory 3">
                    </div>
                    <div class="message-container">
                        <p class="message-text">
                            When I think about the future, I see you there beside me through it all. Every adventure, every challenge, every beautiful ordinary day - I want to experience them all with you. You're not just my partner, you're my best friend, my confidant, and my greatest blessing. Here's to all our tomorrows together. üåü
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="page" id="page2">
            <div class="games-grid">
                <div class="game-card">
                    <h3>üß© Photo Puzzle</h3>
                    <p>Piece together our memory!</p>
                    <div class="puzzle-container" id="puzzleContainer"></div>
                    <button class="btn btn-primary" onclick="shufflePuzzle()">Shuffle</button>
                </div>

                <div class="game-card">
                    <h3>üíñ Heart Timing</h3>
                    <p>Tap when the heart reaches the center!</p>
                    <div class="reaction-game">
                        <div class="target-zone"></div>
                        <div class="heart-slider" id="heartSlider">‚ù§Ô∏è</div>
                    </div>
                    <button class="btn btn-primary" id="reactionBtn" onclick="startReaction()">Start</button>
                    <div id="reactionResult" style="margin-top: 1rem; color: #d63384; font-weight: bold;"></div>
                </div>
            </div>
        </div>

        <div class="page" id="page3">
            <div class="notepad-container">
                <div class="notepad-header">
                    <h2>üìù Your Personal Space</h2>
                    <p>Write your thoughts, dreams, or anything you'd like to remember...</p>
                </div>
                <textarea class="notepad-textarea" id="notepadText" placeholder="Start writing here..."></textarea>
                <div class="notepad-controls">
                    <button class="btn btn-primary" onclick="downloadNote()">üíæ Download Note</button>
                </div>
            </div>
        </div>

        <div class="page" id="page4">
            <h2 style="text-align: center; color: #d63384; margin-bottom: 2rem;">üíù Our Memory Lane</h2>
            <div class="timeline">
                <div class="timeline-item" onclick="openViewer(this)" data-img="https://via.placeholder.com/400x711/ffccdd/ffffff?text=Our+First+Date">
                    <div class="timeline-date">January 2024</div>
                    <img class="timeline-image" src="https://via.placeholder.com/400x711/ffccdd/ffffff?text=Our+First+Date" alt="Memory">
                    <div class="timeline-caption">
                        The day we first met - I'll never forget how nervous and excited I was!
                    </div>
                    <button class="add-note-btn" onclick="event.stopPropagation(); addPersonalNote(this)">Add Your Note</button>
                </div>

                <div class="timeline-item" onclick="openViewer(this)" data-img="https://via.placeholder.com/400x711/ffd6e8/ffffff?text=Adventure+Together">
                    <div class="timeline-date">March 2024</div>
                    <img class="timeline-image" src="https://via.placeholder.com/400x711/ffd6e8/ffffff?text=Adventure+Together" alt="Memory">
                    <div class="timeline-caption">
                        Our little adventure that turned into the best day ever.
                    </div>
                    <button class="add-note-btn" onclick="event.stopPropagation(); addPersonalNote(this)">Add Your Note</button>
                </div>

                <div class="timeline-item" onclick="openViewer(this)" data-img="https://via.placeholder.com/400x711/ffe5f1/ffffff?text=Special+Moment">
                    <div class="timeline-date">June 2024</div>
                    <img class="timeline-image" src="https://via.placeholder.com/400x711/ffe5f1/ffffff?text=Special+Moment" alt="Memory">
                    <div class="timeline-caption">
                        This moment made me realize how lucky I am to have you.
                    </div>
                    <button class="add-note-btn" onclick="event.stopPropagation(); addPersonalNote(this)">Add Your Note</button>
                </div>
            </div>
        </div>
    </div>

    <div class="fullscreen-viewer" id="fullscreenViewer" onclick="closeViewer()">
        <div class="close-viewer">√ó</div>
        <img class="fullscreen-image" id="fullscreenImage" src="" alt="Memory">
    </div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 id="modalTitle"></h2>
            <p id="modalMessage"></p>
            <button class="btn btn-primary" onclick="closeModal()">Close</button>
        </div>
    </div>

    <script>
        // Configuration
        var CHANCE_TO_MISTAKE = 0.35;
        var GRID_SIZE = 3;
        var CELL_SIZE = 120;
        var DOT_RADIUS = 8;
        var LINE_WIDTH = 6;

        // Game state
        var canvas, ctx;
        var hLines = [];
        var vLines = [];
        var boxes = [];
        var scores = {player: 0, ai: 0};
        var currentPlayer = 'player';
        var consecutiveWins = 0;
        var gameActive = true;

        function initGame() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            hLines = [];
            vLines = [];
            boxes = [];
            
            for (var i = 0; i < GRID_SIZE + 1; i++) {
                hLines[i] = [];
                for (var j = 0; j < GRID_SIZE; j++) {
                    hLines[i][j] = 0;
                }
            }
            
            for (var i = 0; i < GRID_SIZE; i++) {
                vLines[i] = [];
                boxes[i] = [];
                for (var j = 0; j < GRID_SIZE + 1; j++) {
                    vLines[i][j] = 0;
                }
                for (var j = 0; j < GRID_SIZE; j++) {
                    boxes[i][j] = 0;
                }
            }
            
            scores = {player: 0, ai: 0};
            currentPlayer = 'player';
            gameActive = true;
            
            canvas.onclick = handleClick;
            drawBoard();
            updateStatus();
        }

        function drawBoard() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw dots
            ctx.fillStyle = '#d63384';
            for (var i = 0; i < GRID_SIZE + 1; i++) {
                for (var j = 0; j < GRID_SIZE + 1; j++) {
                    ctx.beginPath();
                    ctx.arc(50 + j * CELL_SIZE, 50 + i * CELL_SIZE, DOT_RADIUS, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Draw horizontal lines
            for (var i = 0; i < GRID_SIZE + 1; i++) {
                for (var j = 0; j < GRID_SIZE; j++) {
                    if (hLines[i][j] === 0) {
                        ctx.strokeStyle = '#e0e0e0';
                    } else if (hLines[i][j] === 1) {
                        ctx.strokeStyle = '#d63384';
                    } else {
                        ctx.strokeStyle = '#6c757d';
                    }
                    ctx.lineWidth = LINE_WIDTH;
                    ctx.beginPath();
                    ctx.moveTo(50 + j * CELL_SIZE + DOT_RADIUS, 50 + i * CELL_SIZE);
                    ctx.lineTo(50 + (j + 1) * CELL_SIZE - DOT_RADIUS, 50 + i * CELL_SIZE);
                    ctx.stroke();
                }
            }
            
            // Draw vertical lines
            for (var i = 0; i < GRID_SIZE; i++) {
                for (var j = 0; j < GRID_SIZE + 1; j++) {
                    if (vLines[i][j] === 0) {
                        ctx.strokeStyle = '#e0e0e0';
                    } else if (vLines[i][j] === 1) {
                        ctx.strokeStyle = '#d63384';
                    } else {
                        ctx.strokeStyle = '#6c757d';
                    }
                    ctx.lineWidth = LINE_WIDTH;
                    ctx.beginPath();
                    ctx.moveTo(50 + j * CELL_SIZE, 50 + i * CELL_SIZE + DOT_RADIUS);
                    ctx.lineTo(50 + j * CELL_SIZE, 50 + (i + 1) * CELL_SIZE - DOT_RADIUS);
                    ctx.stroke();
                }
            }
            
            // Draw filled boxes
            for (var i = 0; i < GRID_SIZE; i++) {
                for (var j = 0; j < GRID_SIZE; j++) {
                    if (boxes[i][j] === 1) {
                        ctx.fillStyle = 'rgba(214, 51, 132, 0.3)';
                        ctx.fillRect(50 + j * CELL_SIZE + 10, 50 + i * CELL_SIZE + 10, CELL_SIZE - 20, CELL_SIZE - 20);
                        ctx.font = '40px Arial';
                        ctx.fillStyle = '#d63384';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText('üíñ', 50 + j * CELL_SIZE + CELL_SIZE / 2, 50 + i * CELL_SIZE + CELL_SIZE / 2);
                    } else if (boxes[i][j] === 2) {
                        ctx.fillStyle = 'rgba(108, 117, 125, 0.3)';
                        ctx.fillRect(50 + j * CELL_SIZE + 10, 50 + i * CELL_SIZE + 10, CELL_SIZE - 20, CELL_SIZE - 20);
                        ctx.font = '40px Arial';
                        ctx.fillStyle = '#6c757d';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText('ü§ñ', 50 + j * CELL_SIZE + CELL_SIZE / 2, 50 + i * CELL_SIZE + CELL_SIZE / 2);
                    }
                }
            }
        }

        function handleClick(e) {
            if (!gameActive || currentPlayer !== 'player') return;
            
            var rect = canvas.getBoundingClientRect();
            var x = e.clientX - rect.left;
            var y = e.clientY - rect.top;
            
            // Check horizontal lines
            for (var i = 0; i < GRID_SIZE + 1; i++) {
                for (var j = 0; j < GRID_SIZE; j++) {
                    var lineY = 50 + i * CELL_SIZE;
                    var lineX1 = 50 + j * CELL_SIZE;
                    var lineX2 = 50 + (j + 1) * CELL_SIZE;
                    
                    if (hLines[i][j] === 0 && Math.abs(y - lineY) < 15 && x > lineX1 && x < lineX2) {
                        makeMove('h', i, j);
                        return;
                    }
                }
            }
            
            // Check vertical lines
            for (var i = 0; i < GRID_SIZE; i++) {
                for (var j = 0; j < GRID_SIZE + 1; j++) {
                    var lineX = 50 + j * CELL_SIZE;
                    var lineY1 = 50 + i * CELL_SIZE;
                    var lineY2 = 50 + (i + 1) * CELL_SIZE;
                    
                    if (vLines[i][j] === 0 && Math.abs(x - lineX) < 15 && y > lineY1 && y < lineY2) {
                        makeMove('v', i, j);
                        return;
                    }
                }
            }
        }

        function makeMove(type, row, col) {
            var playerCode = currentPlayer === 'player' ? 1 : 2;
            var completedBox = false;
            
            if (type === 'h') {
                hLines[row][col] = playerCode;
                
                if (row > 0 && isBoxComplete(row - 1, col) && boxes[row - 1][col] === 0) {
                    boxes[row - 1][col] = playerCode;
                    scores[currentPlayer]++;
                    completedBox = true;
                }
                if (row < GRID_SIZE && isBoxComplete(row, col) && boxes[row][col] === 0) {
                    boxes[row][col] = playerCode;
                    scores[currentPlayer]++;
                    completedBox = true;
                }
            } else {
                vLines[row][col] = playerCode;
